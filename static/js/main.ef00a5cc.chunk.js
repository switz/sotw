(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{155:function(e,t,n){e.exports=n(355)},162:function(e,t,n){},180:function(e,t){},192:function(e,t){},194:function(e,t){},354:function(e,t,n){},355:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(151),c=n.n(r),s=(n(160),n(161),n(162),n(13)),i=n.n(s),l=n(30),u=n(55),d=n(152),f=n.n(d),h=n(357),p=n(153),w=n.n(p),g=n(89),m=n.n(g),v=(n(354),function(e){return e?[e.getMonth(),e.getDate()].join(":"):""}),y="https://cors-anywhere.herokuapp.com/https://groups.yahoo.com",b=function(){var e=Object(u.a)(i.a.mark(function e(t){var n,a,o,r,c,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.setLoading,a=t.setData,n(!0),e.next=4,fetch("".concat(y,"/neo/groups/nyc_sotw/conversations/topics")).then(function(e){return e.text()}).then(function(e){return m.a.load(e)("#yg-msg-list a.yg-msg-link").attr("href")});case 4:return o=e.sent,e.next=7,fetch("".concat(y).concat(o)).then(function(e){return e.text()}).then(function(e){return m.a.load(e)(".msg-content").html().replace(/<(?:\/?(span|a)).*?>/gm,"").replace(/<(?:.|\n)*?>/gm,"\n").replace(/\n+/g,"\n")}).then(function(e){return f.a.decode(e)}).then(function(e){return e.split("\n").map(function(e){return/:$/.test(e)?"\n".concat(e):e}).join("\n")});case 7:r=e.sent,c=[],console.log("text",r),r.split("\n").forEach(function(e){if(e){if(/Nedar:$/.test(e))s&&c.push(s),s={shows:[],line:e};else if(/\):$/.test(e)){s&&c.push(s);var t=e.match(/\((.+)\)/),n=Object(l.a)(t,2),a=(n[0],n[1]),o=new Date(a+"/"+(new Date).getFullYear());s={shows:[],line:e,date:o}}if(/@/.test(e)&&s){var r=e.match(/(\*)?(.+)@(.+)/),i=Object(l.a)(r,4),u=(i[0],{line:e,isAsterisked:i[1],band:i[2],metadata:i[3]});s.shows.push(u)}}}),s&&c.push(s),localStorage.sotwData=JSON.stringify(c),a(c),n(!1);case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),k=[];try{k=JSON.parse(localStorage.sotwData)}catch(N){console.log("could not parse localstorage",N)}var E=function(){var e=Object(a.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(k),s=Object(l.a)(c,2),d=s[0],f=s[1];return Object(a.useEffect)(function(){w.a.init({mainElement:"body",onRefresh:function(){var e=Object(u.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b({setLoading:r,setData:f});case 2:return e.abrupt("return",Promise.resolve());case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}),b({setLoading:r,setData:f});var e=new Date;e.setTime(e.getTime()-144e5);var t=document.querySelector('.day[data-date="'.concat(v(e),'"]'));t&&t.scrollIntoView()},[]),o.a.createElement("div",{className:"app","data-is-loading":n},d.map(function(e){return o.a.createElement("div",{key:e.line,className:"day","data-date":v(new Date(e.date))},o.a.createElement(h.a,null,e.line," - ",e.shows.length," shows"),e.shows.map(function(e){return o.a.createElement("div",{key:e.line,className:"show","data-is-asterisked":e.isAsterisked},o.a.createElement("div",{className:"band"},e.band),o.a.createElement("div",{className:"metadata"},"@",e.metadata))}))}),d&&o.a.createElement("p",null,"All shows are sourced by Neddyo @ ",o.a.createElement("a",{href:"https://groups.yahoo.com/neo/groups/nyc_sotw/info"},"https://groups.yahoo.com/neo/groups/nyc_sotw/info")),o.a.createElement("a",{href:""},"FORCE REFRESH"))},j=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function O(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(o.a.createElement(E,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/sotw",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/sotw","/service-worker.js");j?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):O(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):O(t,e)})}}()}},[[155,1,2]]]);
//# sourceMappingURL=main.ef00a5cc.chunk.js.map